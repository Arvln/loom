FROM node:23.9.0-alpine

RUN apk add --no-cache git openssh

WORKDIR /usr/src

COPY ./ ./

ENV CI=true

RUN npm install -g pm2 pnpm && pnpm i --frozen-lockfile

WORKDIR /usr/src/packages/frontend

RUN pnpm i --frozen-lockfile

EXPOSE 3000

CMD ["pm2-runtime", "pnpm", "--", "run", "dev"]
